<link id="font" href="https://fonts.googleapis.com/css?family=Roboto:100,200,300,400,500,600,700,800&display=swap" rel="stylesheet">
<link rel=stylesheet href="https://huntingstats378.github.io/HuntingStats378/main/assets/ess/odometer.css">
<script src="https://huntingstats378.github.io/HuntingStats378/main/assets/ess/odometer.js"></script>
<script src="https://huntingstats378.github.io/HuntingStats378/main/assets/ess/highstock.js"></script>
<body>
  <div id="chart" class="chart"></div>
</body>
<style>
  body {
    background-color: var(--backcolor);
    font-size: var(--size);
    font-family: var(--font);
    text-align: var(--fontalign);
    font-weight: var(--fontweight);
  }

  html {
  --backcolor: black;
  --fontcolor: white;
  --size: 100%;
  --fontalign: center;
  --fontweight: 400;
  --font: Roboto;
  }

  .chart {
    width: 100%;
    height: 100%;
    font-weight: var(--fontweight);
    font-family: var(--font);
  }

</style>
<script>
  const params1 = new URLSearchParams(window.location.search);
  var bg = params1.get("background") || "black";
  const params2 = new URLSearchParams(window.location.search);
  var fc = params2.get("fontcolor") || "white";
  const params3 = new URLSearchParams(window.location.search);
  var fa = params3.get("fontalign") || "center";
  const params4 = new URLSearchParams(window.location.search);
  var id = params4.get("id") || "UCX6OQ3DkcsbYNE6H8uQQuVA";
  const params5 = new URLSearchParams(window.location.search);
  var font = params5.get("font") || "Roboto";
  const params6 = new URLSearchParams(window.location.search);
  var sizee = params6.get("size") || "50";
  const params7 = new URLSearchParams(window.location.search);
  var fw = params7.get("fontweight") || "400";

  function validateSize(input) {
    let size = Number(input);
    return (isNaN(size) || size < 1) ? 50 : size;
  }

  let userInput = sizee; // Replace with actual user input
  let size = validateSize(userInput);


  setInterval(() => {
      fetch(
        `https://nia-statistics.com/api/get?platform=youtube&type=channel&id=${id}`
      )
        .then((res) => res.json())
        .then((data) => {

             if (chart.series[0].points.length == 1500) chart.series[0].data[0].remove();
                         chart.series[0].addPoint([Date.now(), data.apiVideoCount])
                     });
             }, 2000);

             var textBright = "#bdbdbd"
             var lineColor = fc
             var maxPoints = 20000;
             var chart = new Highcharts.chart({
                 chart: {
                     renderTo: 'chart',
                     type: 'line',
                     zoomType: 'x',
                     backgroundColor: 'transparent',
                     plotBorderColor: 'transparent'
                 },
                 title: {
                     text: ' '
                 },
                 xAxis: {
                     type: 'datetime',
                     tickPixelInterval: 500,
                     gridLineColor: textBright,
                     labels: {
                         style: {
                             color: textBright
                         }
                     },
                     lineColor: textBright,
                     minorGridLineColor: '#bdbdbd',
                     tickColor: textBright,
                     title: {
                         style: {
                             color: textBright
                         }
                     }
                 },
                 yAxis: {
                     title: {
                         text: ''
                     },
                     gridLineColor: textBright,
                     labels: {
                         style: {
                             color: textBright
                         }
                     },
                     lineColor: textBright,
                     minorGridLineColor: '#bdbdbd',
                     tickColor: textBright
                 },
                 credits: {
                     enabled: false
                 },

                 series: [{
                     showInLegend: false,
                     name: 'Subscribers',
                     marker: {
                         enabled: false
                     },
                     color: '#000000',
                     lineColor: lineColor
                 }]
             });

  document.documentElement.style.setProperty('--backcolor', bg);
  document.documentElement.style.setProperty('--fontcolor', fc);
  document.documentElement.style.setProperty('--fontalign', fa);
  document.documentElement.style.setProperty('--fontweight', fw);
  document.documentElement.style.setProperty('--size', size + "%");
  document.documentElement.style.setProperty('--font', font);
  document.getElementById("font").href = "https://fonts.googleapis.com/css?family=" + font + ":100,200,300,400,500,600,700,800&display=swap";
</script>
